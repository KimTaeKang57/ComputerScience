#단위 테스트란 ?
- 하나의 *모듈을 기준으로 독립적으로 진행되는 가장 작은 단위의 테스트이다.

*모듈 : 애플리케이션에서 작동하는 하나의 기능 또는 메소드

ex) 웹 애플리케이션에서 로그인 메소드에 대한 독립적인 테스트가 1개의 단위테스트가 될 수 있다.

즉, 단위 테스트는 애플리케이션을 구성하는 하나의 기능이 올바르게 동작하는지를 독립적으로 테스트하는 것으로, “어떤 기능이 실행되면 어떤 결과가 나온다” 

##단위 테스트 작성의 필요성
일반적으로 실무에서 테스트 코드를 작성한다 하면 거의 단위 테스트를 의미한다. 단위 테스트는 해당 부분만 독립적으로 테스트하기 때문에 어떤 코드를 리팩토링 하여도 빠르게 문제여부를 확인할 수 있다.

1. 테스팅에 대한 시간과 비용을 절감할 수 있다.
2. 새로운 기능 추가 시에 수시로 빠르게 테스트 할 수 있다.
3. 리팩토링 시에 안전성을 확보할 수 있다.
4. 코드에 대한 문서가 될 수 있다.

이렇기 때문에 실무에서는 통합테스트 보다는 단위테스트를 선호한다고 하며, 요즘 많이 사용되는 TDD에서 얘기하는 테스트도 단위 테스트를 의미한다.

##단위 테스트의 문제점과 Stub
어떤 객체가 자체적으로 모든 일을 처리한다면 문제가 없겠지만, 일반적인 애플리케이션은 1개의 기능을 처리하기 위해 다른 객체들과 메세지를 주고 받아야 한다. 하지만 단위 테스트는 해당 모듈에 대한 독립적인 테스트이기 때문에 다른 객체와 메세지를 주고 받는 경우에 문제가 발생한다. 그렇기 때문에 다른 객체 대신에 가짜 객체(Mock Object)를 주입하여 어떤 결과를 반환하라고 정해진 답변을 준비시켜야 하는데, 이를 ‘stub’ 이라고 한다.

예를 들어 데이터베이스에 새로운 데이터를 추가하는 코드를 테스트한다고 하면, 가짜 데이터베이스(Mock Database)를 주입하여 insert 처리 시에 반드시 1을 반환하도록 해주는 것이 stub 이다

##좋은 단위 테스트의 특징
- 테스트 작성 시 가독성을 높혀라
1. 1개의 테스트 함수에 대해 assert를 최소화 하라
2. 1개의 테스트 함수는 1가지 개념 만을 테스트 하라

- FIRST 규칙을 따라라
1. Fast: 테스트는 빠르게 동작하여 자주 돌릴수 있어야 한다
2. Independent: 각각의 테스트는 독립적이며 서로 의존해서는 안된다
3. Repeatable: 어느 환경에서도 반복 가능해야 한다
4. Self-Validation: 테스트는 성공 또는 실패로 bool 값으로 결과를 내어 자체적으로 검증돼야 한다
5. Timely: 테스트는 적시에 즉, 테스트하려는 실제 코드를 구현하기 직전에 구현해야 한다.

##given/when/then 패턴
1개의 단위 테스트를 3가지 단계로 나누어 처리하는 패턴,

- given(준비) : 어떠한 데이터가 준비 됐을 때
- when(실행) : 어떠한 함수를 실행하면
- then(검증) : 어떠한 결과가 나와야 한다.
